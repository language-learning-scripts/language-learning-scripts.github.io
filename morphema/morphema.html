<!DOCTYPE html>
<html>
  <head>
    <title>Morphema</title>
    <meta name='viewport' content='width=device-width, initial-scale=1.0' />
    <link rel="stylesheet" type="text/css" href="./morphema.css" />
    <link rel="icon" type="image/png" href="favicon.png" />
    <link rel="manifest" href="manifest.json" />
    <script type="text/javascript" src="./systemprompt.js"></script>
    <script type="text/javascript" src="./getsettings.js"></script>
    <script type="text/javascript" src="./morphema.js"></script>
  </head>
  <body onload='loadSettings();' onclick='deactivatePhrase();'>
    <h1>Morphema</h1>
    <hr width='100%' />
    <div id="annotationWindow">
      <div id="annotationText">Select some text to annotate.
      </div>
      <svg id='overlay' xmlns="http://www.w3.org/2000/svg">
	<path id="connector" fill="none" stroke="black" stroke-width="2" />
      </svg>
    </div>
    <div id="controls">
      <button onclick='annotateClipboard();'>Clipboard</button>
      <button onclick='document.getElementById("imageInput").click();'>Camera</button>
      <button onclick="activateSettingsModal();">Settings</button>
    </div>
    <div id="settingsOverlay" onsubmit="collectSettings()">
      <div id="settingsModal">
	  <textarea id="apiKeyEntry" rows="4" cols="50" placeholder="Enter OpenAI API key"></textarea>
	  <br/>
	  <input type="text" label="Model: " id="modelEntry" />
	  <button onclick="collectSettings();">Save</button>
	</form>
      </div>      
    </div>
    <input id="imageInput" type="file" name="pic" accept="image/*" capture="environment"
	   onchange="annotateImage(this.files[0]);" style="display:none" />
    <img id='hiddenImage' style='display:none' />
    <canvas id='hiddenCanvas' width='512' height='512' style='display:none' />
  </body>
</html>
